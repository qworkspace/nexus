# Mission Control: Advanced Analytics Dashboard

## Overview

Deep analytics on Q's performance, patterns, and productivity â€” usage trends, model efficiency, peak hours, cost optimization opportunities.

**Why this matters:** Data-driven insights to optimize the AI ecosystem. Know what's working, what's expensive, what's efficient.

**Estimated build time:** 2-3 hours

---

## Features

### 1. Usage Overview Cards

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ANALYTICS                              [This Week â–¼]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   1,234     â”‚ â”‚   $47.50    â”‚ â”‚    156      â”‚ â”‚   89%   â”‚ â”‚
â”‚ â”‚   Messages  â”‚ â”‚   Cost      â”‚ â”‚   Sessions  â”‚ â”‚ Success â”‚ â”‚
â”‚ â”‚   â–² +12%    â”‚ â”‚   â–¼ -8%     â”‚ â”‚   â–² +23%    â”‚ â”‚  Rate   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Usage Over Time Chart

**Line chart showing daily/hourly usage:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Messages Over Time                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 200 â”‚                          â•­â”€â•®                         â”‚
â”‚     â”‚                    â•­â”€â”€â”€â”€â•¯  â•°â•®                        â”‚
â”‚ 150 â”‚         â•­â”€â”€â”€â”€â•®    â•¯        â•°â•®                        â”‚
â”‚     â”‚    â•­â”€â”€â”€â•¯    â•°â”€â”€â”€â•¯           â•°â•®                       â”‚
â”‚ 100 â”‚â”€â”€â”€â•¯                          â•°â”€â”€â”€                    â”‚
â”‚     â”‚                                                       â”‚
â”‚  50 â”‚                                                       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚       Mon    Tue    Wed    Thu    Fri    Sat    Sun        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Model Usage Breakdown

**Pie chart + table:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Model Distribution                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      Model         Tokens    Cost   â”‚
â”‚     â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚     â”‚  â–ˆâ–ˆ Opus â–ˆâ–ˆ    â”‚      Opus          450k     $42.30  â”‚
â”‚     â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚      Sonnet         89k      $3.20  â”‚
â”‚     â”‚  â–‘â–‘ Sonnet â–‘â–‘  â”‚      GLM Flash     234k      $0.00  â”‚
â”‚     â”‚    â–‘â–‘â–‘â–‘â–‘â–‘      â”‚      GLM 4.7       567k      $0.00  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Agent Performance

**Compare agents:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent Performance                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Agent       Tasks    Avg Time    Success    Cost/Task      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ğŸ¦¾ Q           89      4.2m        94%        $0.48        â”‚
â”‚ ğŸ’» Dev         34      8.7m        91%        $0.00        â”‚
â”‚ ğŸ¨ Creative     5     12.3m       100%        $0.34        â”‚
â”‚ ğŸ” Research     8      6.1m        88%        $0.29        â”‚
â”‚ ğŸ§ª Testing      2     15.0m       100%        $0.00        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Peak Hours Heatmap

**When is Q most active?**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Activity Heatmap (Messages)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚        00  03  06  09  12  15  18  21                      â”‚
â”‚ Mon    â–‘â–‘  â–‘â–‘  â–‘â–‘  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–‘â–‘                      â”‚
â”‚ Tue    â–‘â–‘  â–‘â–‘  â–‘â–‘  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–“â–“  â–‘â–‘                      â”‚
â”‚ Wed    â–‘â–‘  â–‘â–‘  â–‘â–‘  â–ˆâ–ˆ  â–“â–“  â–ˆâ–ˆ  â–ˆâ–ˆ  â–‘â–‘                      â”‚
â”‚ Thu    â–‘â–‘  â–‘â–‘  â–‘â–‘  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–“â–“                      â”‚
â”‚ Fri    â–‘â–‘  â–‘â–‘  â–‘â–‘  â–“â–“  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ                      â”‚
â”‚ Sat    â–‘â–‘  â–‘â–‘  â–‘â–‘  â–‘â–‘  â–“â–“  â–“â–“  â–‘â–‘  â–‘â–‘                      â”‚
â”‚ Sun    â–‘â–‘  â–‘â–‘  â–‘â–‘  â–‘â–‘  â–‘â–‘  â–“â–“  â–‘â–‘  â–‘â–‘                      â”‚
â”‚                                                             â”‚
â”‚ â–‘â–‘ Low   â–“â–“ Medium   â–ˆâ–ˆ High                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6. Cost Optimization Insights

**Smart suggestions:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ OPTIMIZATION INSIGHTS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ”¸ Switch Q to Sonnet during QA loops                      â”‚
â”‚    Potential savings: $12/week                              â”‚
â”‚                                                             â”‚
â”‚ ğŸ”¸ Use GLM Flash for cron jobs                              â”‚
â”‚    Potential savings: $3/week                               â”‚
â”‚                                                             â”‚
â”‚ ğŸ”¸ Batch similar dev agent tasks                            â”‚
â”‚    Potential savings: 20% fewer sessions                    â”‚
â”‚                                                             â”‚
â”‚ ğŸ”¸ Peak usage: 9am-6pm weekdays                             â”‚
â”‚    Consider scheduling heavy tasks for off-peak             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7. Cron Success Rate

**Track cron reliability:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cron Reliability (Last 7 Days)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘  94% Success          â”‚
â”‚                                                             â”‚
â”‚ âœ“ 156 successful                                            â”‚
â”‚ âœ— 10 failed (2 unique jobs)                                 â”‚
â”‚ â­ 3 skipped                                                 â”‚
â”‚                                                             â”‚
â”‚ Most failures: "Q Workspace Backup" (6 failures)            â”‚
â”‚ Cause: Network timeout                                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technical Implementation

### Data Collection

**Sources:**
1. Session transcripts (message counts, durations)
2. Token usage from transcripts
3. Cron run history
4. Cost calculations from model rates

**Storage:**
- For MVP: Calculate on-the-fly from transcripts
- Future: Store aggregated stats in JSON file

### API Routes

```
src/app/api/analytics/
â”œâ”€â”€ overview/route.ts      # Summary stats
â”œâ”€â”€ usage/route.ts         # Usage over time
â”œâ”€â”€ models/route.ts        # Model breakdown
â”œâ”€â”€ agents/route.ts        # Agent performance
â”œâ”€â”€ heatmap/route.ts       # Activity heatmap
â””â”€â”€ insights/route.ts      # Optimization suggestions
```

### File Structure

```
src/app/analytics/
â”œâ”€â”€ page.tsx               # Main analytics page
â””â”€â”€ components/
    â”œâ”€â”€ OverviewCards.tsx
    â”œâ”€â”€ UsageChart.tsx
    â”œâ”€â”€ ModelBreakdown.tsx
    â”œâ”€â”€ AgentPerformance.tsx
    â”œâ”€â”€ ActivityHeatmap.tsx
    â”œâ”€â”€ CronReliability.tsx
    â””â”€â”€ OptimizationInsights.tsx
```

### Charts Library

Use Recharts (already in CryptoMon):
- LineChart for usage over time
- PieChart for model distribution
- BarChart for agent comparison
- Custom heatmap component

---

## Acceptance Criteria

### Must Have
- [ ] /analytics page exists
- [ ] Overview cards with key metrics
- [ ] Usage over time chart (mock data OK)
- [ ] Model breakdown pie chart
- [ ] Navigation item added
- [ ] Build passes: `npm run build`

### Should Have
- [ ] Agent performance table
- [ ] Activity heatmap
- [ ] Time period selector (today/week/month)

### Nice to Have
- [ ] Real data from transcripts
- [ ] Cost optimization insights
- [ ] Cron reliability chart
- [ ] Export analytics report

---

## Mock Data

```typescript
const mockOverview = {
  messages: 1234,
  messagesChange: 12, // percent
  cost: 47.50,
  costChange: -8,
  sessions: 156,
  sessionsChange: 23,
  successRate: 89,
};

const mockUsageByDay = [
  { date: '2026-02-01', messages: 120, cost: 5.20 },
  { date: '2026-02-02', messages: 156, cost: 7.80 },
  // ...
];

const mockModelUsage = [
  { model: 'Opus', tokens: 450000, cost: 42.30, percentage: 58 },
  { model: 'Sonnet', tokens: 89000, cost: 3.20, percentage: 12 },
  { model: 'GLM Flash', tokens: 234000, cost: 0, percentage: 30 },
];
```
